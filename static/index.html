<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>AI Montage Bot</title>
</head>
<body style="font-family: sans-serif; text-align: center; margin-top: 50px;">
  <h2>Upload Media for Montage</h2>
  <input type="file" id="file" multiple />
  <button onclick="upload()">Upload</button>
  <button onclick="process()">Create Montage</button>
  <p id="status"></p>
  <video id="video" width="360" controls style="display:none;"></video>

<script>
async function upload() {
  const files = document.getElementById("file").files;
  for (const f of files) {
    const form = new FormData();
    form.append("file", f);
    const res = await fetch("/upload", { method: "POST", body: form });
    document.getElementById("status").innerText = "Uploaded: " + f.name;
  }
}

async function process() {
  document.getElementById("status").innerText = "Processing...";
  const res = await fetch("/process", { method: "POST" });
  const data = await res.json();
  if (data.output) {
    document.getElementById("status").innerText = "Done!";
    const vid = document.getElementById("video");
    vid.src = "/" + data.output;
    vid.style.display = "block";
  } else {
    document.getElementById("status").innerText = data.error || "Error.";
  }
}
</script>
</body>
</html>
